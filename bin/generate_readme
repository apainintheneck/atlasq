#!/usr/bin/env ruby
# frozen_string_literal: true

require "shellwords"

EXECUTABLE_PATH = File.expand_path("../exe/atlasq", __dir__).freeze

def atlasq(*args)
  escaped_args = args
    .map(&Shellwords.method(:escape))
    .join(" ")

  [
    "$ atlasq #{escaped_args}",
    `#{EXECUTABLE_PATH} #{escaped_args}`
  ].join("\n")
end

puts <<~README
  # Atlasq

  Query for country info at the command line.

  ```console
  #{ atlasq }
  ```

  ## Documentation

  ```console
  #{ atlasq "--help" }
  ```

  ## Examples

  ### Countries

  ```console
  #{ atlasq "--country", "418" }
  ```

  ```console
  #{ atlasq "--country", "AM" }
  ```

  ```console
  #{ atlasq "--country", "honduras" }
  ```

  ### Regions

  ```console
  #{ atlasq "--region", "melanesia" }
  ```

  ```console
  #{ atlasq "--region", "antarctica" }
  ```

  ### Currencies

  ```console
  #{ atlasq "--money", "ANG" }
  ```

  ```console
  #{ atlasq "--money", "à¸¿" }
  ```

  ```console
  #{ atlasq "--money", "Surinamese Dollar" }
  ```

  ## Development

  After checking out the repo, run `bin/setup` to install dependencies. Then, run `rake test` to run the tests. You can also run `bin/console` for an interactive prompt that will allow you to experiment.

  To install this gem onto your local machine, run `bundle exec rake install`. To release a new version, update the version number in `version.rb`, and then run `bundle exec rake release`, which will create a git tag for the version, push git commits and the created tag, and push the `.gem` file to [rubygems.org](https://rubygems.org).

  ## Contributing

  Bug reports and pull requests are welcome on GitHub at https://github.com/apainintheneck/atlasq.

  ## License

  The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
README
