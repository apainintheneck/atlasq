#!/usr/bin/env ruby
# frozen_string_literal: true

require "shellwords"

EXECUTABLE_PATH = File.expand_path("../exe/atlasq", __dir__).freeze

def atlasq(*args)
  escaped_args = args
    .map(&Shellwords.method(:escape))
    .join(" ")

  [
    "$ atlasq #{escaped_args}",
    `#{EXECUTABLE_PATH} #{escaped_args}`
  ].join("\n")
end

puts <<~README
  # Atlasq

  Query for country info at the command line.

  ```console
  #{atlasq}
  ```

  ## Documentation

  ```console
  #{atlasq "--help"}
  ```

  ## Examples

  ### Countries

  ```console
  #{atlasq "--country", "418"}
  ```

  ```console
  #{atlasq "--country", "AM"}
  ```

  ```console
  #{atlasq "--country", "honduras"}
  ```

  ### Regions

  ```console
  #{atlasq "--region", "melanesia"}
  ```

  ```console
  #{atlasq "--region", "antarctica"}
  ```

  ### Currencies

  ```console
  #{atlasq "--money", "ANG"}
  ```

  ```console
  #{atlasq "--money", "à¸¿"}
  ```

  ```console
  #{atlasq "--money", "Surinamese Dollar"}
  ```

  ## Development

  After checking out the repo, run `bin/setup` to install dependencies. Then, run `rake test` to run the tests. Use either `rake lint` to lint the code or `rake fix` to automatically fix simple linter errors.

  You can also run `bin/console` for an interactive prompt that will allow you to experiment.

  To install this gem onto your local machine, run `bundle exec rake install`.

  This file gets generated with the `rake readme:generate` command to make sure the example output is always up-to-date. We even check for this on CI with the `rake readme:outdated` command.

  ## Contributing

  Bug reports and pull requests are welcome on GitHub at https://github.com/apainintheneck/atlasq.

  ## License

  The gem is available as open source under the terms of the [MIT License](https://opensource.org/licenses/MIT).
README
